---
title: REST API Call
description: Connect to external systems using HTTP requests
icon: "plug"
---

The **REST API Call** step connects to external systems using GET, POST, PUT, or PATCH requests with authentication support.

## Overview

The REST API Call step enables SmartAgents to integrate with external systems, fetch data, update records, and trigger actions in third-party platforms.

## Features

### Full HTTP Method Support
- **GET** - Retrieve data from external systems
- **POST** - Create new records or trigger actions
- **PUT** - Update existing records (full replacement)
- **PATCH** - Partial updates to existing records
- **DELETE** - Remove records (when supported)

### Authentication Support
Securely authenticate with external services using multiple methods.

**Supported Auth Types:**
- Bearer Token
- API Key (header or query parameter)
- Basic Authentication
- OAuth 2.0
- Custom headers

### Header Customization
Add custom headers for:
- Content-Type specification
- API versioning
- Request tracking
- Custom authentication

### Request/Response Transformation
- Format request data before sending
- Transform response data after receiving
- Handle different data formats (JSON, XML, form data)

### Secure Credential Storage via Integrations
Store API credentials securely in Settings > Integrations rather than hard-coding them in workflows.

[Learn more about Integrations →](/platform/settings#integrations)

## Configuration

### Endpoint URL
Specify the API endpoint to call:
```
https://api.example.com/v1/customers/{customer_id}
```

### HTTP Method
Select the appropriate method for your operation.

### Headers
Configure request headers:
```
Content-Type: application/json
Authorization: Bearer {api_token}
X-API-Version: 2.0
```

### Request Body
Define the payload for POST/PUT/PATCH requests:
```json
{
  "customer_id": "{customer.id}",
  "status": "resolved",
  "notes": "{agent_notes}"
}
```

### Authentication
Reference stored credentials from Integrations:
```
Integration: "Salesforce Production"
```

## Example Use Cases

### Fetch Customer Data from CRM
```
Method: GET
URL: https://api.crm.com/customers/{email}
Auth: Integration "CRM API"
Response: Customer profile, order history, preferences
```

### Create Support Ticket
```
Method: POST
URL: https://api.zendesk.com/tickets
Auth: Integration "Zendesk"
Body: {
  "subject": "{issue_summary}",
  "description": "{full_description}",
  "priority": "{calculated_priority}"
}
```

### Update Order Status
```
Method: PATCH
URL: https://api.shop.com/orders/{order_id}
Auth: Integration "Shopify"
Body: {
  "status": "cancelled",
  "cancellation_reason": "{reason}"
}
```

### Verify Address
```
Method: POST
URL: https://api.address-validator.com/verify
Auth: API Key in header
Body: {
  "street": "{address.street}",
  "city": "{address.city}",
  "zip": "{address.zip}"
}
Response: Validated address or error
```

## Response Handling

### Success Responses
Access response data in subsequent steps:
```javascript
// Response stored in step output
const customerData = rest_call_output.data;
const orderId = rest_call_output.data.order_id;
```

### Error Handling
Handle different response codes:
- **200-299**: Success
- **400-499**: Client errors (bad request, unauthorized, not found)
- **500-599**: Server errors

### Status Code Routing
Use Router step to handle different outcomes:
```
If status = 200 → Success path
If status = 404 → Not found path
If status = 500 → Error handling path
```

## Best Practices

1. **Use Integrations for Credentials** - Never hard-code API keys
2. **Handle Errors Gracefully** - Plan for API failures
3. **Set Timeouts** - Don't wait indefinitely for responses
4. **Validate Responses** - Check data before using it
5. **Log Important Calls** - Track API usage for debugging
6. **Rate Limiting** - Respect API rate limits
7. **Idempotency** - Ensure repeated calls don't cause issues

## Common Integration Examples

### Salesforce
```
Create Case:
  POST https://instance.salesforce.com/services/data/v55.0/sobjects/Case
  Auth: OAuth 2.0
  Body: Case details
```

### Shopify
```
Get Order:
  GET https://shop-name.myshopify.com/admin/api/2023-01/orders/{id}.json
  Auth: API Key + Password
```

### Stripe
```
Create Refund:
  POST https://api.stripe.com/v1/refunds
  Auth: Bearer token
  Body: charge_id, amount
```

## Security Considerations

### Credential Management
- Store all API keys in Integrations
- Rotate credentials regularly
- Use minimum required permissions
- Never log sensitive credentials

### Data Privacy
- Don't send sensitive customer data unnecessarily
- Encrypt data in transit (use HTTPS)
- Comply with data regulations (GDPR, CCPA)

### Error Messages
- Don't expose API credentials in error messages
- Log errors securely
- Provide generic errors to end users

## Performance Optimization

### Caching
Cache responses for frequently requested data that doesn't change often.

### Parallel Calls
When fetching independent data, make API calls in parallel rather than sequentially.

### Batch Operations
Use batch endpoints when available to reduce number of API calls.

## Troubleshooting

**Connection Timeout**
- Check endpoint URL is correct
- Verify network connectivity
- Increase timeout setting

**Authentication Failed**
- Verify credentials in Integrations
- Check token hasn't expired
- Confirm correct auth method

**Unexpected Response**
- Log full response for inspection
- Validate response schema
- Check API version compatibility

## Related Pages

- [Settings](/platform/settings) - Configure integrations
- [JavaScript Code](/platform/steps/javascript-code) - Transform API responses
- [Structured Output](/platform/steps/structured-output) - Format API request data
- [Router](/platform/steps/router) - Handle different response scenarios